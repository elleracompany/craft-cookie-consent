{% import "_includes/forms" as forms %}

<input type="hidden" name="action" value="cookie-consent/settings/save-cookie-group">
<input type="hidden" name="site_id" value="{{ currentSiteId }}">
<input type="hidden" name="id" value="{{ group.id }}">

{{ csrfInput() }}

{{ forms.lightswitchField({
    label: group.getAttributeLabel('required'),
    instructions: 'If required, the visitor can not turn off this cookie group.'|t('cookie-consent'),
    name: "required",
    on: group.required,
}) }}

{{ forms.lightswitchField({
    label: group.getAttributeLabel('store_ip'),
    instructions: 'If this cookie group is accepted, we store the IP-address in our consent log.'|t('cookie-consent'),
    name: "store_ip",
    on: group.store_ip,
}) }}

{{ forms.lightswitchField({
    label: group.getAttributeLabel('default'),
    instructions: 'Should this cookie group be toggled by default.'|t('cookie-consent'),
    name: "default",
    on: group.default,
}) }}
{% if not group.isNewRecord %}
{{ forms.textField({
    id: "slug",
    disabled: true,
    instructions: 'Use this slug to refrence this consent in your code.'|t('cookie-consent'),
    label: group.getAttributeLabel('slug'),
    name: "slug",
    value: group.slug,
}) }}
{% endif %}

{{ forms.textField({
    id: "name",
    label: group.getAttributeLabel('name'),
    name: "name",
    value: group.name,
    errors: group.getErrors("name"),
}) }}

{{ forms.textAreaField({
    id: "description",
    label: group.getAttributeLabel('description'),
    name: "description",
    rows: 4,
    value: group.description,
    errors: group.getErrors("description"),
}) }}

{{ forms.editableTable({
    id: 'cookies',
    name: 'cookies',
    label: group.getAttributeLabel('cookies'),
    required: false,
    cols: {
        name: {
            heading: "Cookie-name" |t,
            type: "singleline" |t
        },
        provider: {
            heading: "Provider" |t,
            type: "singleline" |t
        },
        description: {
            heading: "Description" |t,
            type: "multiline" |t
        },
        expiry: {
            heading: "Expiry" |t,
            type: "singleline" |t
        }
    },
    errors: group.getErrors("cookies"),
    rows: group.cookies
}) }}